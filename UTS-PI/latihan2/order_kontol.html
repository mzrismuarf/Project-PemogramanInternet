<!DOCTYPE html>
<html lang="en">

<head>
    <!-- head content... -->
    <link rel="stylesheet" href="css/order.css">
    <link rel="stylesheet" href="css/popup.css">
    <script type="text/javascript" src="js/popup.js"></script>


</head>

<body>
    <div class="overlay" id="overlay"></div>
    <div class="order-form">
        <h1>Order Form</h1>
        <form id="order-form">
            <label for="name">Name:</label>
            <input type="text" id="name" name="name" required>

            <label for="address">Address:</label>
            <textarea id="address" name="address" required></textarea>

            <label for="phone">Phone:</label>
            <input type="tel" id="phone" name="phone" required>

            <div id="order-items"></div>
            <p id="total-price">Total Price: Rp. 0.00</p>
            <!-- <button type="button" onclick="openPopup()">Place Order</button> -->
            <button type="button" onclick="validateAndPlaceOrder()">Place Order</button>
        </form>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const orderData = JSON.parse(localStorage.getItem('orderData'));
            const totalQty = localStorage.getItem('orderTotalQty');
            const totalPrice = localStorage.getItem('orderTotalPrice');

            // Menampilkan data dari localStorage di console
            console.log("Order Data:", orderData);
            console.log("Total Qty:", totalQty);
            console.log("Total Price:", totalPrice);

            const orderItemsContainer = document.getElementById('order-items');

            // Pastikan bahwa container ditemukan
            console.log("Order Items Container:", orderItemsContainer);

            if (orderData && orderItemsContainer) {
                orderData.forEach(function (item) {
                    // Menampilkan data item di console
                    console.log("Item:", item);

                    const orderItem = document.createElement('div');
                    orderItem.classList.add('order-item');

                    // Pastikan imgSrc ada di dalam item
                    console.log("Item Image Source:", item.imgSrc);

                    if (item.imgSrc) {
                        const img = document.createElement('img');
                        img.src = item.imgSrc;
                        img.alt = item.title;
                        img.classList.add('order-item-img');
                        orderItem.appendChild(img);
                    }

                    const title = document.createElement('p');
                    title.innerText = item.title;
                    orderItem.appendChild(title);

                    const qty = document.createElement('p');
                    qty.innerText = `Qty: ${item.qty}`;
                    orderItem.appendChild(qty);

                    const price = document.createElement('p');
                    price.innerText = `Price: Rp. ${(item.qty * item.price).toFixed(2)}`;
                    orderItem.appendChild(price);

                    orderItemsContainer.appendChild(orderItem);
                });

                // Tambahkan total qty dan total price
                const orderTotal = document.getElementById('order-total');
                orderTotal.innerHTML = `Total Qty: ${totalQty}<br>Total Price: Rp. ${totalPrice}`;
            }
        });


        // const totalPrice = orderData.reduce((acc, item) => acc + item.qty * parseFloat(item.price), 0);
        // const totalContainer = document.createElement('p');
        // totalContainer.textContent = `Total Price: Rp. ${totalPrice.toFixed(2)}`;

        // popupContent.appendChild(totalContainer);
        // popupContainer.appendChild(popupContent);

        // // Tampilkan pop-up sukses
        // document.body.appendChild(popupContainer);
        //     }

        // function showErrorPopup(message) {
        //     // Tampilkan pop-up gagal
        //     alert(`Orderan Gagal\n${message}`);
        // }


        // });



    </script>
</body>

</html>